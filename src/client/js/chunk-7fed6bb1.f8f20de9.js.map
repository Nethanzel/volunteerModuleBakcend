{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/components/DynamicConfigurationManager.vue?3c2f","webpack:///src/components/DynamicConfigurationManager.vue","webpack:///./src/components/DynamicConfigurationManager.vue?685b","webpack:///./src/components/DynamicConfigurationManager.vue","webpack:///./src/views/Schools.vue?cc88","webpack:///./node_modules/core-js/modules/esnext.iterator.map.js","webpack:///./src/views/Schools.vue?84be","webpack:///src/views/Schools.vue","webpack:///./src/views/Schools.vue?5111","webpack:///./src/views/Schools.vue","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/DynamicConfigurationManager.vue?e701"],"names":["_arrayWithHoles","r","Array","isArray","_iterableToArrayLimit","l","t","Symbol","iterator","e","n","i","u","a","f","o","call","next","Object","done","push","value","length","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","record","key","class","deleted","ref","refInFor","allowDelete","style","display","on","$event","deleteRecord","_e","allowRestore","restoreRecord","attrs","field","pointerEvents","type","options","id","saveEdited","handleSaveField","staticRenderFns","props","data","fields","components","EditableField","methods","stopLoadin","showLoadin","c","hideLoadin","parent","event","target","component","$","apply","aCallable","anObject","createIteratorProxy","callWithSafeIterationClosing","IteratorProxy","args","result","mapper","proto","real","forced","map","_v","showBlur","escuelas","_fields","_allowEditStationPermission","_allowDeleteStationPermission","_allowRestoreStationPermission","handleUpdateField","handleDelete","handleRestore","handleHideBlur","hideCreatingLoading","handleCreateStation","DynamicConfigurationManager","DynamicModelCreator","nombres","loadin","provincias","mounted","getEscuelas","requests","Promise","showFieldLoading","obj","mun","municipios","Request","res","message","icon","computed","_municipios","_nombres","_allowCreateStationPermission","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-7fed6bb1.f8f20de9.js","sourcesContent":["function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"manager-view\"},_vm._l((_vm.data),function(record,i){return _c('div',{key:(\"mv-\" + i),class:{ record:true, deleted:record.deleted }},[_c('div',{ref:(\"mv-\" + (record.id)),refInFor:true,staticClass:\"head\"},[(!record.deleted && _vm.allowDelete)?_c('i',{staticClass:\"icofont-ui-delete\",style:({ display: record.deleted ? 'none' : 'block' }),on:{\"click\":function($event){return _vm.deleteRecord(record, $event)}}}):_vm._e(),(record.deleted && _vm.allowRestore)?_c('i',{staticClass:\"icofont-refresh\",style:({ display: record.deleted ? 'block' : 'none' }),on:{\"click\":function($event){return _vm.restoreRecord(record, $event)}}}):_vm._e(),_c('img',{staticClass:\"rotating\",attrs:{\"src\":require(\"../assets/spinner.png\"),\"alt\":\"loading\"}})]),_vm._l((_vm.fields),function(field,i){return _c('EditableField',{key:(\"mf-\" + i),style:({ pointerEvents: record.deleted ? 'none' : 'unset' }),attrs:{\"type\":field.type,\"label\":field.display,\"_key\":field.key,\"value\":record[field.key],\"options\":field.options,\"data-record-id\":record.id,\"disableSave\":!_vm.saveEdited},on:{\"save\":function($event){return _vm.handleSaveField($event, record.id)}}})})],2)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"manager-view\">\r\n        <div :class=\"{ record:true, deleted:record.deleted }\" v-for=\"(record, i) in data\" :key=\"`mv-${i}`\">\r\n            <div class=\"head\" :ref=\"`mv-${record.id}`\">\r\n                <i \r\n                    v-if=\"!record.deleted && allowDelete\"\r\n                    class=\"icofont-ui-delete\" \r\n                    :style=\"{ display: record.deleted ? 'none' : 'block' }\" \r\n                    @click=\"deleteRecord(record, $event)\"\r\n                >\r\n                </i>\r\n                <i \r\n                    v-if=\"record.deleted && allowRestore\"\r\n                    class=\"icofont-refresh\" \r\n                    :style=\"{ display: record.deleted ? 'block' : 'none' }\" \r\n                    @click=\"restoreRecord(record, $event)\"\r\n                >\r\n                </i>\r\n                <img class=\"rotating\" src=\"../assets/spinner.png\" alt=\"loading\">\r\n            </div>\r\n            <EditableField \r\n                v-for=\"(field, i) in fields\"\r\n                :type=\"field.type\" \r\n                :key=\"`mf-${i}`\"\r\n                :label=\"field.display\"\r\n                :_key=\"field.key\"\r\n                :value=\"record[field.key]\"\r\n                :options=\"field.options\"\r\n                @save=\"handleSaveField($event, record.id)\"\r\n                :style=\"{ pointerEvents: record.deleted ? 'none' : 'unset' }\"\r\n                :data-record-id=\"record.id\"\r\n                :disableSave=\"!saveEdited\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import EditableField from \"./EditableField\"\r\n    export default {\r\n        props: {\r\n            data: Array,\r\n            fields: Array,\r\n            saveEdited: Boolean,\r\n            allowDelete: Boolean,\r\n            allowRestore: Boolean\r\n        },\r\n        components: {\r\n            EditableField\r\n        },\r\n        methods: {\r\n            deleteRecord(record, e) {\r\n                this.showLoadin(e);\r\n                this.$emit('delete', { id:record.id, stopLoadin:this.hideLoadin });\r\n            },\r\n            restoreRecord(record, e) {\r\n                this.showLoadin(e);\r\n                this.$emit('restore', { id:record.id, stopLoadin:this.hideLoadin });\r\n            },\r\n            showLoadin(e) {\r\n                e.target.parentElement.getElementsByTagName('img')[0].style.display = 'block';\r\n                for (const c of e.target.parentElement.getElementsByTagName('i')) c.style.display = 'none';\r\n            },\r\n            hideLoadin(i) {\r\n                const parent = this.$refs[`mv-${i}`][0];\r\n                if (!parent) return;\r\n                parent.getElementsByTagName('img')[0].style.display = 'none';\r\n                for (const c of parent.getElementsByTagName('i')) c.style.display = 'block';\r\n            },\r\n            handleSaveField(event, id) {\r\n                this.$emit('updateField', { field: event.field, target: event.target, id });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .manager-view {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-wrap: wrap;\r\n        margin: 0 auto;\r\n        max-width: 765px;\r\n        padding-bottom: 25px;\r\n        .record {\r\n            margin: 10px;\r\n            padding: 10px;\r\n            max-width: 340px;\r\n            border-radius: 5px;\r\n            background-color: #e7e7e7;\r\n            .head {\r\n                display: flex;\r\n                justify-content: flex-end;\r\n                text-align: right;\r\n                margin: 0 5px 10px 0;\r\n                min-height: 16px;\r\n                i {\r\n                    cursor: pointer;\r\n                }\r\n                .rotating {\r\n                    width: 20px;\r\n                    height: 20px;\r\n                    display: none;\r\n                }\r\n            }\r\n        }\r\n        .deleted {\r\n            opacity: .5;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicConfigurationManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicConfigurationManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DynamicConfigurationManager.vue?vue&type=template&id=38913592&scoped=true&\"\nimport script from \"./DynamicConfigurationManager.vue?vue&type=script&lang=js&\"\nexport * from \"./DynamicConfigurationManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DynamicConfigurationManager.vue?vue&type=style&index=0&id=38913592&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38913592\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schools.vue?vue&type=style&index=0&id=0f2f1eed&lang=scss&scoped=true&\"","'use strict';\n// https://github.com/tc39/proposal-iterator-helpers\nvar $ = require('../internals/export');\nvar apply = require('../internals/function-apply');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar IteratorProxy = createIteratorProxy(function (args) {\n  var iterator = this.iterator;\n  var result = anObject(apply(this.next, iterator, args));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, result.value);\n});\n\n$({ target: 'Iterator', proto: true, real: true, forced: true }, {\n  map: function map(mapper) {\n    return new IteratorProxy({\n      iterator: anObject(this),\n      mapper: aCallable(mapper)\n    });\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stations\"},[_c('h1',[_vm._v(\"Escuelas\")]),(_vm._allowCreateStationPermission)?_c('p',{staticClass:\"add-info\",on:{\"click\":function($event){_vm.showBlur = true}}},[_c('i',{staticClass:\"icofont-plus-circle\"}),_vm._v(\" Agregar\")]):_vm._e(),(_vm.loadin)?_c('img',{staticClass:\"rotating\",attrs:{\"src\":require(\"../assets/spinner.png\"),\"alt\":\"loadin\"}}):_vm._e(),_c('DynamicConfigurationManager',{attrs:{\"data\":_vm.escuelas,\"fields\":_vm._fields,\"saveEdited\":_vm._allowEditStationPermission,\"allowDelete\":_vm._allowDeleteStationPermission,\"allowRestore\":_vm._allowRestoreStationPermission},on:{\"updateField\":_vm.handleUpdateField,\"delete\":_vm.handleDelete,\"restore\":_vm.handleRestore}}),_c('transition',{attrs:{\"name\":\"circle-blur\"}},[(_vm.showBlur)?_c('div',{staticClass:\"blury-cnt\",on:{\"click\":function($event){return _vm.handleHideBlur()}}},[_c('DynamicModelCreator',{attrs:{\"fields\":_vm._fields,\"title\":'Crear escuela'},on:{\"hide\":function($event){_vm.showBlur = false},\"ready\":function($event){_vm.hideCreatingLoading = $event},\"done\":function($event){return _vm.handleCreateStation($event)}}})],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"stations\">\r\n        <h1>Escuelas</h1>\r\n        <p class=\"add-info\" @click=\"showBlur = true\" v-if=\"_allowCreateStationPermission\"><i class=\"icofont-plus-circle\"></i> Agregar</p>\r\n\r\n        <img class=\"rotating\" src=\"../assets/spinner.png\" alt=\"loadin\" v-if=\"loadin\">\r\n\r\n        <DynamicConfigurationManager \r\n            :data=\"escuelas\" \r\n            :fields=\"_fields\"\r\n            :saveEdited=\"_allowEditStationPermission\"\r\n            :allowDelete=\"_allowDeleteStationPermission\"\r\n            :allowRestore=\"_allowRestoreStationPermission\"\r\n            @updateField=\"handleUpdateField\" \r\n            @delete=\"handleDelete\" \r\n            @restore=\"handleRestore\" \r\n        />\r\n        \r\n        <transition name=\"circle-blur\">\r\n            <div class=\"blury-cnt\" @click=\"handleHideBlur()\" v-if=\"showBlur\">\r\n                <DynamicModelCreator\r\n                    @hide=\"showBlur = false\"\r\n                    @ready=\"hideCreatingLoading = $event\"\r\n                    @done=\"handleCreateStation($event)\"\r\n                    :fields=\"_fields\" \r\n                    :title=\"'Crear escuela'\" \r\n                />\r\n            </div>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Request from '../request/instance.js';\r\n    const provincias = require(\"../assets/data/provincias.json\");\r\n    const municipios = require(\"../assets/data/municipios.json\");\r\n    import DynamicModelCreator from '../components/DynamicModelCreator.vue';\r\n    import DynamicConfigurationManager from '../components/DynamicConfigurationManager';\r\n    import { showFieldLoading, hideFieldLoading } from '../utils/handleEditableField.js';\r\n\r\n    export default {\r\n        components: {\r\n            DynamicConfigurationManager,\r\n            DynamicModelCreator\r\n        },\r\n        data() {\r\n            return {\r\n                escuelas: [],\r\n                nombres: [],\r\n                loadin: true,\r\n                provincias,\r\n                showBlur: false,\r\n                hideCreatingLoading: () => {}\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getEscuelas();\r\n        },\r\n        methods: {\r\n            async getEscuelas() {\r\n                this.loadin = true;\r\n                \r\n                let requests = [ Request.Get.Escuelas(), Request.Get.NombreMiembros() ];\r\n                let [escuelas, nombres] = await Promise.all(requests).catch(() => null).finally(() => this.loadin = false);\r\n\r\n                if (escuelas?.status == 200) this.escuelas = escuelas.data;\r\n                if (nombres?.status == 200) this.nombres = nombres.data.rows;\r\n\r\n            },\r\n            async handleUpdateField(e) {\r\n                showFieldLoading(e.target);\r\n\r\n                let obj = { id: e.id, field: { [e.field.key]: e.field.value } }\r\n                if (e.field.key == 'municipio') {\r\n                    let mun = municipios.find(m => m.municipio_id == e.field.value);\r\n                    obj.field.provincia = mun.provincia_id;\r\n                }\r\n                let res = await Request.Patch.UpdateStacion(obj).catch(() => hideFieldLoading(e.target)).finally(() => hideFieldLoading(e.target))\r\n                if (res?.status == 204) {\r\n                    this.escuelas.find(x => x.id == e.id)[e.field.key] = e.field.value;\r\n                    if (e.field.key == 'municipio') this.escuelas.find(x => x.id == e.id)[\"provincia\"] = obj.field.provincia;\r\n\r\n                    this.$throwAppMessage({ \r\n                        message: \"Informacion actualizada!\",\r\n                        icon: \"icofont-check-circled\",\r\n                        type: 'ok',\r\n                    });\r\n                }\r\n            },\r\n            async handleDelete(e) {\r\n                let res = await Request.Delete.removeEscuela(e.id).catch(() => e.stopLoadin(e.id)).finally(() => e.stopLoadin(e.id));\r\n                if (res?.status == 204) {\r\n                    this.escuelas.find(x => x.id == e.id).deleted = false;\r\n                    this.getEscuelas();\r\n                    this.$throwAppMessage({ \r\n                        message: \"Escuela borrada!\",\r\n                        icon: \"icofont-check-circled\",\r\n                        type: 'ok',\r\n                    });\r\n                }\r\n            },\r\n            async handleRestore(e) {\r\n                let res = await Request.Patch.restoreEscuela(e.id).catch(() => e.stopLoadin(e.id)).finally(() => e.stopLoadin(e.id));\r\n                if (res?.status == 204) {\r\n                    this.escuelas.find(x => x.id == e.id).deleted = false;\r\n                    this.$throwAppMessage({ \r\n                        message: \"Escuela restaurada!\",\r\n                        icon: \"icofont-check-circled\",\r\n                        type: 'ok',\r\n                    });\r\n                }\r\n            },\r\n            handleHideBlur() {\r\n                this.showBlur = false;\r\n            },\r\n            async handleCreateStation(e) {\r\n                if (!e.municipio) {\r\n                    return this.$throwAppMessage({ \r\n                        message: \"Elige el municipio de la escuela!\",\r\n                        icon: \"icofont-close-circled\",\r\n                        type: 'error',\r\n                    });\r\n                }\r\n\r\n                e.provincia = municipios.find(m => m.municipio_id == e.municipio).provincia_id;\r\n\r\n                e.lat = e.lat ? Number(e.lat) : null; \r\n                e.lng = e.lng ? Number(e.lng) : null;\r\n\r\n                let res = await Request.Post.newStation(e).catch(() => this.hideCreatingLoading()).finally(() => this.hideCreatingLoading());\r\n                if (res?.status == 201) {\r\n                    this.handleHideBlur();\r\n                    this.getEscuelas();\r\n                    this.$throwAppMessage({ \r\n                        message: \"Escuela creada!\",\r\n                        icon: \"icofont-check-circled\",\r\n                        type: 'ok',\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            _municipios() {\r\n                let result = [];\r\n                municipios?.map(p => result.push({ key: p.municipio_id, value: p.municipio }));\r\n                return result;\r\n            },\r\n            _nombres() {\r\n                let result = [];\r\n                this.nombres?.map(n => result.push({ key: n.id, value: `${n.nombre} ${n.apellido}` }));\r\n                return result;\r\n            },\r\n            _fields() {\r\n                return [\r\n                    {\r\n                        key: 'nombre',\r\n                        display: 'Nombre',\r\n                        type: 'text'\r\n                    },\r\n                    {\r\n                        key: 'lat',\r\n                        display: 'Latitud',\r\n                        type: 'text'\r\n                    },\r\n                    {\r\n                        key: 'lng',\r\n                        display: 'Longitud',\r\n                        type: 'text'\r\n                    },\r\n                    {\r\n                        key: 'municipio',\r\n                        display: 'Municipio',\r\n                        type: 'select',\r\n                        options: this._municipios\r\n                    },\r\n                    {\r\n                        key: 'liderId',\r\n                        display: 'Sifu a cargo',\r\n                        type: 'select',\r\n                        options: this._nombres\r\n                    },\r\n                ]\r\n            },\r\n            _allowCreateStationPermission() {\r\n                return this.$store.getters.isAllowedToPermission(['CS'])\r\n            },\r\n            _allowEditStationPermission() {\r\n                return this.$store.getters.isAllowedToPermission(['US'])\r\n            },\r\n            _allowDeleteStationPermission() {\r\n                return this.$store.getters.isAllowedToPermission(['DE'])\r\n            },\r\n            _allowRestoreStationPermission() {\r\n                return this.$store.getters.isAllowedToPermission(['RDE'])\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .stations {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: calc(100dvh - 75px);\r\n        h1 {\r\n            user-select: none;\r\n        }\r\n        .rotating {\r\n            width: 50px;\r\n            height: 50px;\r\n            margin: 20px auto;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Schools.vue?vue&type=template&id=0f2f1eed&scoped=true&\"\nimport script from \"./Schools.vue?vue&type=script&lang=js&\"\nexport * from \"./Schools.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Schools.vue?vue&type=style&index=0&id=0f2f1eed&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f2f1eed\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DynamicConfigurationManager.vue?vue&type=style&index=0&id=38913592&lang=scss&scoped=true&\""],"sourceRoot":""}